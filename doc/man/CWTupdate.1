.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.13
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "CWTUPDATE 1"
.TH CWTUPDATE 1 "2005-01-13" "perl v5.8.1" "QTL Cartographer 1.17 Perl Script"
.SH "NAME"
CWTupdate.pl \- Update the comparisonwise test results file during a permutation test
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 1
\&   CWTupdate.pl [-f CWTfile] [-h] < input > output
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBCWTupdate.pl\fR reads from the standard input and writes to the standard
output. It can do one of two things.   The first is to initialize a file
of likelihood ratios in the \fIZipermC.out\fR format from a \fIZmapqtl.out\fR
file. The second is to read the results of a run of \fBZmapqtl\fR and the
current \fIZipermC.out\fR file and update the results.   It is a \fBPerl\fR
script meant to be run in a loop with \fBPrune\fR and \fBZmapqtl\fR.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-f\fR" 4
.IX Item "-f"
This option requires an input filename that must exist.  It allows the user to 
specify the \fIZipermC.out\fR file for processing.   If it is not given, then the 
script assumes that an initial file will be created.  
.IP "\fB\-h\fR" 4
.IX Item "-h"
requires no operand.  If used, it prints a usage message and exits.
.IP "\fB\-C\fR" 4
.IX Item "-C"
requires an integer operand.  This should be the column from the \fIZmapqtl.out\fR
file that you want processed.
.SH "EXAMPLE"
.IX Header "EXAMPLE"
See the example in the \fBGetMaxLR.pl\fR manpage.  An alternate version
of the shell script is given below, but the example in \fBGetMaxLR\fR
is cleaner and simpler to understand.   The one presented below
has the advantage of being able to input command line parameters
rather than having to edit the script.   This script has also been
rewritten as a \fBPerl\fR script with its own man page (\fB\f(BIPermute.pl\fB\|(1)\fR). 
.PP
\&\fBCWTupdate.pl\fR was meant to be run in a shell script.  Here is an 
example of a \fBc\fR shell program that allows calculate the experimentwise
threshold.
.PP
.Vb 45
\&        #!/bin/csh
\&        #   Permute.csh
\&        #   Usage:  Permute.csh stem permutations email
\&        #  where stem is the filename stem.
\&        #        permutations is the number of permutations
\&        #  and   email is the user's email address
\&        #  Note:  This only works if you have set and used a filename stem.
\&        #
\&        if ( $1 == '-h' ) then
\&        echo "    Usage:  Permute.csh stem model permutations email"
\&        echo "Where"
\&        echo "          stem  = filename stem"
\&        echo "         model  = Zmapqtl Model"
\&        echo "  permutations  = number of permutations"
\&        echo "         email  = user's email address"
\&        echo " "
\&        echo "Now exiting"
\&        exit
\&        endif
\&        set templog=temp.log
\&        /usr/bin/rm -f $templog
\&        echo "Permutation test started " > $templog
\&        /usr/bin/date >>  $templog
\&        echo "Stem: " $1 >> $templog
\&        echo "Model: " $2 >> $templog
\&        echo "Reps: " $3 >> $templog
\&        echo "Email: " $4 >> $templog
\&        set bindir=/usr/local/bin
\&        set i=1
\&        /usr/bin/mv $1.log $1.logsave
\&        /usr/bin/mv $1.z $1.zsave
\&        /usr/bin/rm -f $1.z$2e
\&        $bindir/CWTupdate -C 4 < $1.z > $1.z$2c
\&        while ( $i < $3 )
\&        $bindir/Prune -A -V -i $1.cro -b 2  >>&  $templog
\&        nice $bindir/Zmapqtl -A -V -M $2 -i $1.crb  >>&  $templog
\&        $bindir/CWTupdate -f $1.z$2c -C 4 < $1.z  >> $1.z$2cc
\&        /usr/bin/mv -f $1.z$2cc $1.z$2c
\&        /usr/bin/rm -f $1.z
\&        @ i++
\&        end
\&        /usr/bin/mv $1.zsave $1.z
\&        /usr/bin/mv $1.logsave $1.log
\&        /usr/bin/date >>  $templog
\&        /usr/ucb/mail $4 <  $templog
.Ve
.PP
Suppose you had a data set \fIcorn.cro\fR and a map file \fIcorn.map\fR.  To use the above
shell script, create a directory called \fIcornperm\fR and copy the two files into it.
Run \fBQstats\fR on the files to initialize the \fIqtlcart.rc\fR file, and \fBSRmapqtl\fR to
rank a set of markers for use with composite interval mapping.  Make sure that the
\&\fB\s-1QTL\s0 Cartographer\fR programs are installed in the \fI/usr/local/bin\fR subdirectory
(or change the 29th line above).   Then, to do a permutation test using interval
mapping with 1,000 repetitions, run 
.PP
.Vb 1
\&        % Permute.csh corn 3 1000 your.email.address  &
.Ve
.PP
(substituting your real email address above).  The script will email you a message when
it is complete. 
.PP
Note that the above example uses \fB\-C 4\fR for the \fBCWTupdate\fR line in the loop.
If you want to use a different column of likelihood ratios, you can change 
that option.  You could create multiple files of the format \fIZipermC.out\fR
and collect the maximal likelihood ratio from different hypothesis tests by
having multiple instances of \fBCWTupdate\fR in the loop.    
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fB\f(BIZmapqtl\fB\|(1)\fR, \fB\f(BIPrune\fB\|(1)\fR,  \fB\f(BIGetMaxLR.pl\fB\|(1)\fR, \fB\f(BIPermute.pl\fB\|(1)\fR
.SH "AUTHORS"
.IX Header "AUTHORS"
In general, it is best to contact us via email (basten@statgen.ncsu.edu).
.PP
.Vb 4
\&        Christopher J. Basten, B. S. Weir and Z.-B. Zeng
\&        Department of Statistics, North Carolina State University
\&        Raleigh, NC 27695-7566, USA
\&        Phone: (919)515-1934
.Ve
